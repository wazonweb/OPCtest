<button onclick="connect()">Connect to ESP32</button>
<p>Temperature: <span id="temp">--</span> Â°C</p>

<script>
  let tempChar;

  async function connect() {
    const device = await navigator.bluetooth.requestDevice({
      filters: [{ name: 'ESP32_BLE_Server' }],
      optionalServices: ['4fafc201-1fb5-459e-8fcc-c5c9c331914b']
    });

    const server = await device.gatt.connect();
    const service = await server.getPrimaryService('4fafc201-1fb5-459e-8fcc-c5c9c331914b');

    tempChar = await service.getCharacteristic('beb5483e-36e1-4688-b7f5-ea07361b26a8');

    tempChar.startNotifications().then(char => {
      char.addEventListener('characteristicvaluechanged', event => {
        const value = new TextDecoder().decode(event.target.value);
        document.getElementById('temp').textContent = value;
      });
    });

    alert("Connected to ESP32!");
  }
</script>